{"ast":null,"code":"import _assertThisInitialized from \"/home/DigPatho/Streamlit-Image-Annotation/streamlit_image_annotation/Point/frontend/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";\nimport _inherits from \"/home/DigPatho/Streamlit-Image-Annotation/streamlit_image_annotation/Point/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/home/DigPatho/Streamlit-Image-Annotation/streamlit_image_annotation/Point/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport _classCallCheck from \"/home/DigPatho/Streamlit-Image-Annotation/streamlit_image_annotation/Point/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/home/DigPatho/Streamlit-Image-Annotation/streamlit_image_annotation/Point/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport { Util } from './Util.js';\nimport { SceneContext, HitContext } from './Context.js';\nimport { Konva } from './Global.js';\nimport { Factory } from './Factory.js';\nimport { getNumberValidator } from './Validators.js';\nvar _pixelRatio;\nfunction getDevicePixelRatio() {\n  if (_pixelRatio) {\n    return _pixelRatio;\n  }\n  var canvas = Util.createCanvasElement();\n  var context = canvas.getContext('2d');\n  _pixelRatio = function () {\n    var devicePixelRatio = Konva._global.devicePixelRatio || 1,\n      backingStoreRatio = context.webkitBackingStorePixelRatio || context.mozBackingStorePixelRatio || context.msBackingStorePixelRatio || context.oBackingStorePixelRatio || context.backingStorePixelRatio || 1;\n    return devicePixelRatio / backingStoreRatio;\n  }();\n  Util.releaseCanvas(canvas);\n  return _pixelRatio;\n}\nexport var Canvas = /*#__PURE__*/function () {\n  function Canvas(config) {\n    _classCallCheck(this, Canvas);\n    this.pixelRatio = 1;\n    this.width = 0;\n    this.height = 0;\n    this.isCache = false;\n    var conf = config || {};\n    var pixelRatio = conf.pixelRatio || Konva.pixelRatio || getDevicePixelRatio();\n    this.pixelRatio = pixelRatio;\n    this._canvas = Util.createCanvasElement();\n    this._canvas.style.padding = '0';\n    this._canvas.style.margin = '0';\n    this._canvas.style.border = '0';\n    this._canvas.style.background = 'transparent';\n    this._canvas.style.position = 'absolute';\n    this._canvas.style.top = '0';\n    this._canvas.style.left = '0';\n  }\n  _createClass(Canvas, [{\n    key: \"getContext\",\n    value: function getContext() {\n      return this.context;\n    }\n  }, {\n    key: \"getPixelRatio\",\n    value: function getPixelRatio() {\n      return this.pixelRatio;\n    }\n  }, {\n    key: \"setPixelRatio\",\n    value: function setPixelRatio(pixelRatio) {\n      var previousRatio = this.pixelRatio;\n      this.pixelRatio = pixelRatio;\n      this.setSize(this.getWidth() / previousRatio, this.getHeight() / previousRatio);\n    }\n  }, {\n    key: \"setWidth\",\n    value: function setWidth(width) {\n      this.width = this._canvas.width = width * this.pixelRatio;\n      this._canvas.style.width = width + 'px';\n      var pixelRatio = this.pixelRatio,\n        _context = this.getContext()._context;\n      _context.scale(pixelRatio, pixelRatio);\n    }\n  }, {\n    key: \"setHeight\",\n    value: function setHeight(height) {\n      this.height = this._canvas.height = height * this.pixelRatio;\n      this._canvas.style.height = height + 'px';\n      var pixelRatio = this.pixelRatio,\n        _context = this.getContext()._context;\n      _context.scale(pixelRatio, pixelRatio);\n    }\n  }, {\n    key: \"getWidth\",\n    value: function getWidth() {\n      return this.width;\n    }\n  }, {\n    key: \"getHeight\",\n    value: function getHeight() {\n      return this.height;\n    }\n  }, {\n    key: \"setSize\",\n    value: function setSize(width, height) {\n      this.setWidth(width || 0);\n      this.setHeight(height || 0);\n    }\n  }, {\n    key: \"toDataURL\",\n    value: function toDataURL(mimeType, quality) {\n      try {\n        return this._canvas.toDataURL(mimeType, quality);\n      } catch (e) {\n        try {\n          return this._canvas.toDataURL();\n        } catch (err) {\n          Util.error('Unable to get data URL. ' + err.message + ' For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html.');\n          return '';\n        }\n      }\n    }\n  }]);\n  return Canvas;\n}();\nFactory.addGetterSetter(Canvas, 'pixelRatio', undefined, getNumberValidator());\nexport var SceneCanvas = /*#__PURE__*/function (_Canvas) {\n  _inherits(SceneCanvas, _Canvas);\n  var _super = _createSuper(SceneCanvas);\n  function SceneCanvas() {\n    var _this;\n    var config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n      width: 0,\n      height: 0\n    };\n    _classCallCheck(this, SceneCanvas);\n    _this = _super.call(this, config);\n    _this.context = new SceneContext(_assertThisInitialized(_this));\n    _this.setSize(config.width, config.height);\n    return _this;\n  }\n  return _createClass(SceneCanvas);\n}(Canvas);\nexport var HitCanvas = /*#__PURE__*/function (_Canvas2) {\n  _inherits(HitCanvas, _Canvas2);\n  var _super2 = _createSuper(HitCanvas);\n  function HitCanvas() {\n    var _this2;\n    var config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n      width: 0,\n      height: 0\n    };\n    _classCallCheck(this, HitCanvas);\n    _this2 = _super2.call(this, config);\n    _this2.hitCanvas = true;\n    _this2.context = new HitContext(_assertThisInitialized(_this2));\n    _this2.setSize(config.width, config.height);\n    return _this2;\n  }\n  return _createClass(HitCanvas);\n}(Canvas);","map":{"version":3,"names":["Util","SceneContext","HitContext","Konva","Factory","getNumberValidator","_pixelRatio","getDevicePixelRatio","canvas","createCanvasElement","context","getContext","devicePixelRatio","_global","backingStoreRatio","webkitBackingStorePixelRatio","mozBackingStorePixelRatio","msBackingStorePixelRatio","oBackingStorePixelRatio","backingStorePixelRatio","releaseCanvas","Canvas","config","_classCallCheck","pixelRatio","width","height","isCache","conf","_canvas","style","padding","margin","border","background","position","top","left","_createClass","key","value","getPixelRatio","setPixelRatio","previousRatio","setSize","getWidth","getHeight","setWidth","_context","scale","setHeight","toDataURL","mimeType","quality","e","err","error","message","addGetterSetter","undefined","SceneCanvas","_Canvas","_inherits","_super","_createSuper","_this","arguments","length","call","_assertThisInitialized","HitCanvas","_Canvas2","_super2","_this2","hitCanvas"],"sources":["/home/DigPatho/Streamlit-Image-Annotation/streamlit_image_annotation/Point/frontend/node_modules/konva/lib/Canvas.js"],"sourcesContent":["import { Util } from './Util.js';\nimport { SceneContext, HitContext } from './Context.js';\nimport { Konva } from './Global.js';\nimport { Factory } from './Factory.js';\nimport { getNumberValidator } from './Validators.js';\nvar _pixelRatio;\nfunction getDevicePixelRatio() {\n    if (_pixelRatio) {\n        return _pixelRatio;\n    }\n    var canvas = Util.createCanvasElement();\n    var context = canvas.getContext('2d');\n    _pixelRatio = (function () {\n        var devicePixelRatio = Konva._global.devicePixelRatio || 1, backingStoreRatio = context.webkitBackingStorePixelRatio ||\n            context.mozBackingStorePixelRatio ||\n            context.msBackingStorePixelRatio ||\n            context.oBackingStorePixelRatio ||\n            context.backingStorePixelRatio ||\n            1;\n        return devicePixelRatio / backingStoreRatio;\n    })();\n    Util.releaseCanvas(canvas);\n    return _pixelRatio;\n}\nexport class Canvas {\n    constructor(config) {\n        this.pixelRatio = 1;\n        this.width = 0;\n        this.height = 0;\n        this.isCache = false;\n        var conf = config || {};\n        var pixelRatio = conf.pixelRatio || Konva.pixelRatio || getDevicePixelRatio();\n        this.pixelRatio = pixelRatio;\n        this._canvas = Util.createCanvasElement();\n        this._canvas.style.padding = '0';\n        this._canvas.style.margin = '0';\n        this._canvas.style.border = '0';\n        this._canvas.style.background = 'transparent';\n        this._canvas.style.position = 'absolute';\n        this._canvas.style.top = '0';\n        this._canvas.style.left = '0';\n    }\n    getContext() {\n        return this.context;\n    }\n    getPixelRatio() {\n        return this.pixelRatio;\n    }\n    setPixelRatio(pixelRatio) {\n        var previousRatio = this.pixelRatio;\n        this.pixelRatio = pixelRatio;\n        this.setSize(this.getWidth() / previousRatio, this.getHeight() / previousRatio);\n    }\n    setWidth(width) {\n        this.width = this._canvas.width = width * this.pixelRatio;\n        this._canvas.style.width = width + 'px';\n        var pixelRatio = this.pixelRatio, _context = this.getContext()._context;\n        _context.scale(pixelRatio, pixelRatio);\n    }\n    setHeight(height) {\n        this.height = this._canvas.height = height * this.pixelRatio;\n        this._canvas.style.height = height + 'px';\n        var pixelRatio = this.pixelRatio, _context = this.getContext()._context;\n        _context.scale(pixelRatio, pixelRatio);\n    }\n    getWidth() {\n        return this.width;\n    }\n    getHeight() {\n        return this.height;\n    }\n    setSize(width, height) {\n        this.setWidth(width || 0);\n        this.setHeight(height || 0);\n    }\n    toDataURL(mimeType, quality) {\n        try {\n            return this._canvas.toDataURL(mimeType, quality);\n        }\n        catch (e) {\n            try {\n                return this._canvas.toDataURL();\n            }\n            catch (err) {\n                Util.error('Unable to get data URL. ' +\n                    err.message +\n                    ' For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html.');\n                return '';\n            }\n        }\n    }\n}\nFactory.addGetterSetter(Canvas, 'pixelRatio', undefined, getNumberValidator());\nexport class SceneCanvas extends Canvas {\n    constructor(config = { width: 0, height: 0 }) {\n        super(config);\n        this.context = new SceneContext(this);\n        this.setSize(config.width, config.height);\n    }\n}\nexport class HitCanvas extends Canvas {\n    constructor(config = { width: 0, height: 0 }) {\n        super(config);\n        this.hitCanvas = true;\n        this.context = new HitContext(this);\n        this.setSize(config.width, config.height);\n    }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}